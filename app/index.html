<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inkfinity Hub Generator (Internal)</title>
  <style>
    :root { --bg:#0b0b0f; --card:#12121a; --muted:#a1a1b3; --text:#f2f2f7; --line:#26263a; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background:linear-gradient(180deg,#0b0b0f,#0b0b0f 40%, #0f1020); color:var(--text); }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 18px; }
    h1 { font-size: 22px; margin: 8px 0 2px; }
    .sub { color: var(--muted); font-size: 13px; margin-bottom: 14px; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }
    .card { background: rgba(18,18,26,.92); border: 1px solid var(--line); border-radius: 14px; padding: 14px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    @media (max-width: 680px){ .row{ grid-template-columns: 1fr; } }
    label { display:block; font-size: 12px; color: var(--muted); margin: 10px 0 6px; }
    input, select, textarea { width:100%; box-sizing:border-box; padding: 10px 11px; border-radius: 10px; border:1px solid #2a2a3f; background:#0f0f18; color:var(--text); outline:none; }
    textarea { min-height: 78px; resize: vertical; }
    .pillbar { display:flex; gap:8px; flex-wrap:wrap; margin-top: 10px; }
    .pill { border:1px solid #2a2a3f; background:#0f0f18; padding: 8px 10px; border-radius: 999px; font-size: 12px; cursor:pointer; user-select:none; }
    .pill.active { background:#1a1030; border-color:#6f52ff; }
    .btnrow { display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; align-items:center; }
    button { cursor:pointer; border-radius: 10px; border:1px solid #2a2a3f; background:#10102a; color:var(--text); padding: 10px 12px; }
    button.primary { background:#6f52ff; border-color:#6f52ff; color:#0b0b0f; font-weight: 700; }
    .hint { color: var(--muted); font-size: 12px; margin-top: 8px; }
    pre { margin:0; padding: 12px; border-radius: 12px; background: #0b0b12; border:1px solid #24243a; overflow:auto; font-size: 12px; line-height: 1.35; }
    .sectionTitle { font-size: 14px; margin: 0 0 6px; color:#d7d7ff; }
    .split { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    @media (max-width: 680px){ .split{ grid-template-columns: 1fr; } }
    .mini { font-size: 11px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Inkfinity Hub Generator (Internal)</h1>
    <div class="sub">Founder-operated tool for fast pilots. Not customer self-serve.</div>

    <div class="grid">
      <div class="card">
        <div class="sectionTitle">1) Choose a mode</div>
        <div class="pillbar" id="modePills"></div>
        <div class="hint">Mode sets your default button suggestions. You can still edit anything.</div>

        <label>Business name</label>
        <input id="business_name" placeholder="e.g. Puffin Good Food Truck" />

        <div class="row">
          <div>
            <label>Tagline</label>
            <input id="tagline" placeholder="e.g. Coffee, toasties & good vibes" />
          </div>
          <div>
            <label>Logo URL (optional)</label>
            <input id="logo_url" placeholder="https://..." />
          </div>
        </div>

        <label>Website (paste full URL)</label>
        <input id="website" placeholder="https://..." />

        <div class="row">
          <div>
            <label>Phone (optional)</label>
            <input id="phone" placeholder="+353..." />
          </div>
          <div>
            <label>Email (optional)</label>
            <input id="email" placeholder="hello@..." />
          </div>
        </div>

        <label>WhatsApp number (optional)</label>
        <input id="whatsapp" placeholder="+353..." />
        <div class="mini">Tip: We auto-format WhatsApp to <code>wa.me</code> (removes the +).</div>

        <div class="row">
          <div>
            <label>Instagram</label>
            <input id="instagram" placeholder="https://instagram.com/..." />
          </div>
          <div>
            <label>TikTok</label>
            <input id="tiktok" placeholder="https://tiktok.com/@..." />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Facebook</label>
            <input id="facebook" placeholder="https://facebook.com/..." />
          </div>
          <div>
            <label>Google Maps URL (optional)</label>
            <input id="google_maps_url" placeholder="https://maps.google.com/..." />
          </div>
        </div>

        <label>Address (optional)</label>
        <input id="address" placeholder="Town, County, Country" />

        <div class="split">
          <div>
            <label>Primary colour (hex)</label>
            <input id="brand_primary_color" placeholder="#111111" />
          </div>
          <div>
            <label>Accent colour (hex)</label>
            <input id="brand_accent_color" placeholder="#6f52ff" />
          </div>
        </div>

        <label>Notes (internal)</label>
        <textarea id="notes" placeholder="Anything you want to remember about this lead..."></textarea>

        <div class="btnrow">
          <button id="autoFill">Auto-fill links from website</button>
          <button class="primary" id="generate">Generate Hub JSON</button>
        </div>
      </div>

      <div class="card">
        <div class="sectionTitle">2) Suggested buttons</div>
        <div class="hint">Toggle what you want included in the Hub.</div>
        <div id="buttonToggles"></div>

        <div style="height:12px"></div>
        <div class="sectionTitle">Generated Hub JSON</div>
        <div class="btnrow">
          <button id="copy">Copy JSON</button>
        </div>
        <pre id="out">{}</pre>
      </div>
    </div>
  </div>

<script>
  const MODES = [
    {
      id: "networking",
      label: "Networking",
      buttons: [
        { key:"btn_whatsapp", label:"Message us", type:"whatsapp" },
        { key:"btn_call", label:"Call", type:"call" },
        { key:"btn_email", label:"Email", type:"email" },
        { key:"btn_instagram", label:"Instagram", type:"social" },
        { key:"btn_website", label:"Website", type:"link" }
      ]
    },
    {
      id: "growth",
      label: "Growth",
      buttons: [
        { key:"btn_review", label:"Leave a review", type:"review" },
        { key:"btn_follow_ig", label:"Follow on Instagram", type:"social" },
        { key:"btn_tiktok", label:"TikTok", type:"social" },
        { key:"btn_website", label:"Website", type:"link" },
        { key:"btn_map", label:"Find us", type:"map" }
      ]
    },
    {
      id: "sales",
      label: "Sales",
      buttons: [
        { key:"btn_order", label:"Order / Book", type:"link" },
        { key:"btn_menu", label:"Menu / Services", type:"link" },
        { key:"btn_pay", label:"Pay", type:"payment" },
        { key:"btn_whatsapp", label:"Message us", type:"whatsapp" },
        { key:"btn_website", label:"Website", type:"link" }
      ]
    }
  ];

  let currentMode = "networking";
  let toggles = {}; // key -> boolean

  function qs(id){ return document.getElementById(id); }
  function safe(v){ return (v || "").trim(); }

  function waLink(number){
    const clean = safe(number).replace(/\s+/g,"").replace(/^\+/,"");
    if(!clean) return "";
    return `https://wa.me/${clean}?text=Hi!%20I%20found%20you%20via%20your%20Inkfinity%20Hub.`;
  }

  function renderModes(){
    const wrap = qs("modePills");
    wrap.innerHTML = "";
    MODES.forEach(m => {
      const el = document.createElement("div");
      el.className = "pill" + (m.id === currentMode ? " active" : "");
      el.textContent = m.label;
      el.onclick = () => { currentMode = m.id; renderModes(); renderToggles(); };
      wrap.appendChild(el);
    });
  }

  function modeObj(){ return MODES.find(m => m.id === currentMode); }

  function renderToggles(){
    const wrap = qs("buttonToggles");
    wrap.innerHTML = "";
    const m = modeObj();

    // default toggles for mode
    toggles = {};
    m.buttons.forEach(b => toggles[b.key] = true);

    // add extra common options
    const extras = [
      { key:"btn_facebook", label:"Facebook", type:"social" },
      { key:"btn_google_review", label:"Google Review", type:"review" },
      { key:"btn_map", label:"Find us", type:"map" }
    ];
    const all = [...m.buttons, ...extras];

    all.forEach(b => {
      const row = document.createElement("div");
      row.style.display = "flex";
      row.style.alignItems = "center";
      row.style.justifyContent = "space-between";
      row.style.gap = "10px";
      row.style.border = "1px solid #26263a";
      row.style.borderRadius = "12px";
      row.style.padding = "10px";
      row.style.marginTop = "10px";
      row.style.background = "#0f0f18";

      const left = document.createElement("div");
      left.innerHTML = `<div style="font-weight:700">${b.label}</div><div class="mini">${b.type}</div>`;

      const right = document.createElement("input");
      right.type = "checkbox";
      right.checked = toggles[b.key] === true;
      right.onchange = () => { toggles[b.key] = right.checked; };

      row.appendChild(left);
      row.appendChild(right);
      wrap.appendChild(row);
    });
  }

  function autoFillLinks(){
    // light helper: if user pastes instagram/tiktok/facebook handles in website field,
    // do nothing. If they paste a domain, we just keep website as-is.
    // (Real scraping comes later; this is an internal MVP.)
    const website = safe(qs("website").value);
    if(!website) return;
    // no-op for now, placeholder for future.
    alert("Auto-fill is basic in this MVP. Paste any social links directly into the fields for now.");
  }

  function buildButtons(){
    const m = modeObj();
    const out = [];
    let priority = 1;

    const website = safe(qs("website").value);
    const ig = safe(qs("instagram").value);
    const tt = safe(qs("tiktok").value);
    const fb = safe(qs("facebook").value);
    const maps = safe(qs("google_maps_url").value);
    const phone = safe(qs("phone").value);
    const email = safe(qs("email").value);
    const wa = safe(qs("whatsapp").value);

    // helper to push if toggled and destination exists
    function push(key, label, type, url){
      if(!toggles[key]) return;
      if(!url) return;
      out.push({ id: key, label, type, url, icon: "", priority: priority++ });
    }

    // Build from mode defaults first
    m.buttons.forEach(b => {
      if(b.type === "whatsapp") push(b.key, b.label, b.type, waLink(wa));
      if(b.type === "call") push(b.key, b.label, b.type, phone ? `tel:${phone}` : "");
      if(b.type === "email") push(b.key, b.label, b.type, email ? `mailto:${email}` : "");
      if(b.key === "btn_instagram" || b.key === "btn_follow_ig") push(b.key, b.label, "social", ig);
      if(b.key === "btn_tiktok") push(b.key, b.label, "social", tt);
      if(b.key === "btn_website") push(b.key, b.label, "link", website);
      if(b.type === "map") push(b.key, b.label, "map", maps);
      if(b.key === "btn_review") push(b.key, b.label, "review", ""); // keep empty unless user adds
      if(b.key === "btn_pay") push(b.key, b.label, "payment", "");   // keep empty unless user adds
      if(b.key === "btn_order" || b.key === "btn_menu") push(b.key, b.label, "link", ""); // set later per biz
    });

    // Extras
    push("btn_facebook", "Facebook", "social", fb);
    push("btn_map", "Find us", "map", maps);
    // Optional: add google review if user pastes it into maps field or notes later — leaving blank for now

    return out;
  }

  function generate(){
    const data = {
      version: "1.0",
      hub: {
        hub_id: "AUTO_GENERATE",
        business_name: safe(qs("business_name").value),
        tagline: safe(qs("tagline").value),
        logo_url: safe(qs("logo_url").value),
        brand: {
          primary_color: safe(qs("brand_primary_color").value),
          secondary_color: "",
          accent_color: safe(qs("brand_accent_color").value)
        },
        contact: {
          phone: safe(qs("phone").value),
          email: safe(qs("email").value),
          whatsapp: safe(qs("whatsapp").value)
        },
        location: {
          address: safe(qs("address").value),
          google_maps_url: safe(qs("google_maps_url").value)
        },
        links: {
          website: safe(qs("website").value),
          instagram: safe(qs("instagram").value),
          tiktok: safe(qs("tiktok").value),
          facebook: safe(qs("facebook").value)
        },
        buttons: buildButtons(),
        qr: {
          qr_destination_url: "",
          qr_image_url: ""
        },
        meta: {
          created_at: new Date().toISOString(),
          updated_at: new Date().toISOString(),
          plan: currentMode
        },
        internal: {
          notes: safe(qs("notes").value)
        }
      }
    };

    qs("out").textContent = JSON.stringify(data, null, 2);
  }

  function copyJSON(){
    const txt = qs("out").textContent || "";
    navigator.clipboard.writeText(txt).then(() => {
      alert("Copied ✅");
    }).catch(() => {
      alert("Copy failed — select the JSON and copy manually.");
    });
  }

  // init
  renderModes();
  renderToggles();

  qs("autoFill").onclick = autoFillLinks;
  qs("generate").onclick = generate;
  qs("copy").onclick = copyJSON;

  // auto-regenerate when key fields change (nice for demos)
  ["business_name","tagline","website","instagram","tiktok","facebook","phone","email","whatsapp","address","google_maps_url","brand_primary_color","brand_accent_color","notes","logo_url"]
    .forEach(id => qs(id).addEventListener("input", () => generate()));

  // first render
  generate();
</script>
</body>
</html>
